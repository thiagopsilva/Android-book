package org.example.sodoku;

import android.app.Activity;
import android.app.Dialog;
import android.os.Bundle;
import android.util.Log;
import android.view.Gravity;
import android.widget.Toast;

public class  Game extends Activity {
	private static final String TAG = "Sodoku";
	
	public static final String KEY_DIFFICULTY = "org.example.sodoku.difficultly";
	public static final int DIFFICULTY_EASY = 0;
	public static final int DIFFICULTY_MEDIUM = 1;
	public static final int DIFFICULTY_HARD = 2;
	
	private int puzzle[];
	private PuzzleView puzzleView;
	
	
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		Log.d(TAG, "onCreate");
		int diff = getIntent().getIntExtra(KEY_DIFFICULTY,
		DIFFICULTY_EASY);
		puzzle = getPuzzle(diff);
		calculateUsedTiles();
		puzzleView = new PuzzleView(this);
		setContentView(puzzleView);
		puzzleView.requestFocus();
	}
	
	protected void showKeypadOrError(int x, int y){
		int tiles[] = getUsedTiles(x, y);
		if (tiles.lenght == 9) {
			Toast toast = Toast.maketext(this,R.string.no_moves_label, Toast.LENGTH_SHORT);
			toast.setGravity(Gravity.CENTER, 0, 0);
			toast.show();
			}else{
				Log.d(TAG, "showKeypad: used=" + toPuzzleString(tiles));
				Dialog v = new Keypad(this, tiles, puzzleView);
				v.show();
			}
	}
	protected boolean setTileIfValid(int x, int y, int value){
		int tiles[] = getUsedTiles(x, y);
		if (value !=0){
			for (int tile : tiles) {
				if (tile == value)
					return false;
			}
		}
		setTile(x, y, value);
		calculateUserTiles();
		return true;
	}
	
	private  final  int used[][][] = new int[9][9][];
	
	protected int[] getUsedTiles(int x, int y) {
		return used[x][y];
	}
	
	private void calculateUsedTiles() {
		for (int x = 0; x < 9; x++) {
			for (int y = 0; y < 9; y++) {
				used[x][y] = calculateUsedTiles(x, y);
				// Log.d(TAG, "used[" + x + "][" + y + "] = "
				// + toPuzzleString(used[x][y]));
			}
		}
	}
	
	private int[] calculateUsedTiles(int x, int y){
		
	}
	
}